{% extends 'web/base.html' %}
{% load static %}
{% load humanize %}

{% block main_area %}
<!-- Header-->
<header class="bg-light py-5">
    <div class="container px-4 px-lg-5 my-5">
        <div class="text-center text-dark">
            <h1 class="display-4 fw-bolder">
                {% if store == "gs25" %}
                    <b>GS25</b>
                {% elif store == "cu" %}
                    <b>CU</b>
                {% elif store == "seven" %}
                    <b>세븐일레븐</b>
                {% endif %}
            </h1>
            <p class="lead fw-normal text-dark-50 mb-0">1+1 행사 상품 목록</p>
        </div>
    </div>
</header>


<section class="py-5">
    <div class="container px-4 px-lg-5 mt-5">
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            
            {% for p in products %}
                <div class="col mb-5">
                    <div class="card h-100">
                        <!-- Product image-->
                        <div class="badge bg-danger text-white position-absolute" style="top: 1rem; right: 1rem">1+1</div>
                        {% if p.like_users.count != 0 %}
                            <div class="badge bg-primary text-white position-absolute" style="top: 2.5rem; right: 1rem">
                                <i class="fa-solid fa-thumbs-up"></i>
                                <span class="">{{ p.like_users.count }}</span>
                            </div>
                        {% endif %}
                        
                        <a href="{{ p.get_absolute_url }}">
                            <img class="card-img-top pt-4" style="height: 10rem; object-fit: contain;" src="{{ p.image }}" alt="..." />
                        </a>

                        <!-- Product details-->
                        <div class="card-body">
                            <div class="text-center">
                                <!-- Product name-->
                                <p>
                                    <a class="text-body" href="{{ p.get_absolute_url }}">
                                        {{ p.name }}
                                    </a>
                                </p>
                                <!-- Product price-->
                                <h5 class="fw-bolder m-1">
                                    {{ p.price|intcomma }}원
                                </h5>
                                <p class="m-0 font-weight-light">(개당 {% widthratio p.price 2 1 as price_ratio %}{{ price_ratio|intcomma }}원)</p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>



<!-- Section-->
<section class="py-5">
    <div class="container px-4 px-lg-5 mt-5">

        {% comment %} {% for b in best %}
            <h5>추천 상품{{ forloop.counter }} : {{ b.name }}</h5>
        {% endfor %} {% endcomment %}

        <div class="row gx-4 gx-lg-5 row-cols-1 row-cols-md-2 row-cols-xl-3 justify-content-center">

            {% for p in products %}
                <div class="col mb-3">
                    <div class="card pt-0 pb-0">
                        <div class="row no-gutters align-items-center">
                            <div class="col-3 text-center">
                                <a href="{{ p.get_absolute_url }}">
                                    <img class="p-1" style="height: 5rem; object-fit: contain;" src={{ p.image }} onerror="this.onerror=null; this.src='https://hanamsport.or.kr/www/images/contents/thum_detail.jpg';" class="card-img" alt="...">
                                </a>
                            </div>
                            <div class="col-8">
                                <div class="card-body p-3">
                                    <span class="badge badge-danger">1+1</span>
                                    {% if p.like_users.count != 0 %}
                                        <span class="badge badge-primary">
                                            <i class="fa-solid fa-thumbs-up"></i>
                                            <span class="">{{ p.like_users.count }}</span>
                                        </span>
                                    {% endif %}

                                    <a href="{{ p.get_absolute_url }}"><p class="card-title m-0">{{ p.name }}</p></a>
                                    <p class="card-text">{{ p.price|intcomma }}원 (개당 {% widthratio p.price 2 1 as price_ratio %}{{ price_ratio|intcomma }}원)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
            

        </div>
    </div>
</section>

{% endblock %}